<h2 class="text-center my-5">Detalhes</h2>
<div class="container mt-4">
    <ul class="nav nav-tabs" id="profileTabs" role="tablist">
        <li class="nav-item" role="presentation">
            <button class="nav-link active" id="profile-tab" data-bs-toggle="tab" data-bs-target="#profile"
                type="button" role="tab">Informação de perfil</button>
        </li>
        <li class="nav-item" role="presentation">
            <button class="nav-link" id="password-tab" data-bs-toggle="tab" data-bs-target="#password" type="button"
                role="tab">Alteração senha</button>
        </li>
    </ul>

    <div class="tab-content mt-3" id="profileTabsContent">
        <div class="tab-pane fade show active mx-4 my-3" id="profile" role="tabpanel" aria-labelledby="profile-tab">
            <h3 class="my-5 text-center">Perfil</h3>
            <div *ngIf="!isEditing">
                <p>Nome: {{ userForm.get('name')?.value }}</p>
                <p>Email: {{ userForm.get('email')?.value }}</p>
                <p>Morada: {{ userForm.get('address')?.value }}</p>
                <p>Código Postal: {{ userForm.get('postalCode')?.value }}</p>
                <p>País: {{ userForm.get('country')?.value }}</p>
                <button id="btChange" class="btn btn-primary mx-auto my-5" (click)="toggleEditMode()">Alterar
                    Informação</button>
            </div>

            <form *ngIf="isEditing" [formGroup]="userForm" (ngSubmit)="saveProfile()" class="mt-3">
                <div class="mb-3 row">
                    <label for="name" class="col-sm-2 col-form-label">Nome</label>
                    <div class="col-sm-10">
                        <input id="name" class="form-control" formControlName="name" required>
                        <div *ngIf="userForm.get('name')?.invalid && userForm.get('name')?.touched">
                            <small class="text-danger">Este campo é obrigatório.</small>
                        </div>
                    </div>
                </div>

                <div class="mb-3 row">
                    <label for="email" class="col-sm-2 col-form-label">Email</label>
                    <div class="col-sm-10">
                        <input id="email" type="email" class="form-control" formControlName="email" required>
                        <div *ngIf="userForm.get('email')?.invalid && userForm.get('email')?.touched">
                            <small class="text-danger">Este campo é obrigatório.</small>
                        </div>
                    </div>
                </div>

                <div class="mb-3 row">
                    <label for="address" class="col-sm-2 col-form-label">Morada</label>
                    <div class="col-sm-10">
                        <input id="address" class="form-control" formControlName="address" required>
                        <div *ngIf="userForm.get('address')?.invalid && userForm.get('address')?.touched">
                            <small class="text-danger">Este campo é obrigatório.</small>
                        </div>
                    </div>
                </div>

                <div class="mb-3 row">
                    <label for="postalCode" class="col-sm-2 col-form-label">Código Postal</label>
                    <div class="col-sm-10">
                        <input id="postalCode" class="form-control" formControlName="postalCode" required>

                        <div *ngIf="userForm.get('postalCode')?.invalid && userForm.get('postalCode')?.touched">
                            <small class="text-danger">Este campo é obrigatório.</small>
                        </div>
                    </div>
                </div>

                <div class="mb-3 row">
                    <label for="country" class="col-sm-2 col-form-label">País</label>
                    <div class="col-sm-10">
                        <input id="country" class="form-control" formControlName="country" required>
                        <div *ngIf="userForm.get('country')?.invalid && userForm.get('country')?.touched">
                            <small class="text-danger">Este campo é obrigatório.</small>
                        </div>
                    </div>
                </div>

                <div class="button-container">
                    <button type="submit" class="btn btn-primary mx-auto my-5">Guardar alterações</button>
                    <button type="button" class="btn btn-primary mx-auto my-5" (click)="toggleEditMode()">Voltar
                        atrás</button>
                </div>
            </form>
        </div>

        <div class="tab-pane fade mx-4 my-3" id="password" role="tabpanel" aria-labelledby="password-tab">
            <h3 class="my-5 text-center">Alteração de senha</h3>
            <form [formGroup]="passwordForm" (ngSubmit)="changePassword()">
                <div class="mb-3 row">
                    <label for="currentPassword" class="col-sm-3 col-form-label">Senha atual</label>
                    <div class="col-sm-8">
                        <input id="currentPassword" type="password" class="form-control"
                            formControlName="currentPassword" required>
                        <div
                            *ngIf="userForm.get('currentPassword')?.invalid && userForm.get('currentPassword')?.touched">
                            <small class="text-danger">Este campo é obrigatório.</small>
                        </div>
                    </div>
                </div>

                <div class="mb-3 row">
                    <label for="newPassword" class="col-sm-3 col-form-label">Nova senha</label>
                    <div class="col-sm-8">
                        <input id="newPassword" type="password" class="form-control" formControlName="newPassword"
                            required>

                        <div *ngIf="userForm.get('newPassword')?.invalid && userForm.get('newPassword')?.touched">
                            <small class="text-danger">Este campo é obrigatório. A senha deve ter pelo menos 8
                                caracteres,
                                uma letra maiúscula, uma letra minúscula, um número e um símbolo.</small>
                        </div>
                    </div>
                </div>

                <div class="mb-3 row">
                    <label for="confirmPassword" class="col-sm-3 col-form-label">Confirme a nova senha</label>
                    <div class="col-sm-8">
                        <input id="confirmPassword" type="password" class="form-control"
                            formControlName="confirmPassword" required>

                        <div
                            *ngIf="userForm.get('confirmPassword')?.invalid && userForm.get('confirmPassword')?.touched">
                            <small class="text-danger">Este campo é obrigatório.</small>
                        </div>
                    </div>
                </div>

                <button type="submit" class="btn btn-primary mx-auto my-5">Alterar senha</button>
            </form>
        </div>
    </div>

    <div *ngIf="message !== '' " class="alert alert-success mt-3">
        {{ message }}
    </div>
</div>